

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Grasp Execution &mdash; EMD alpha documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Grasp Execution Configuration Files" href="grasp_execution_configuration.html" />
    <link rel="prev" title="Grasp Planner Output Message Types" href="../grasp_planner/grasp_planner_output.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> EMD
          

          
            
            <img src="../../_static/emd_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../about/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/future_plans.html">Future Plans</a></li>
</ul>
<p class="caption"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/common_concepts.html">Common Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started/download_instructions.html">Download Instructions</a></li>
</ul>
<p class="caption"><span class="caption-text">Individual Package Details</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../workcell_builder/workcell_builder.html">Workcell Builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../grasp_planner/grasp_planner.html">Grasp Planner</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Grasp Execution</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#benefits-of-emd-grasp-execution">Benefits of EMD Grasp Execution</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#package-configuration">Package configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#launch-file">Launch file</a></li>
<li class="toctree-l3"><a class="reference internal" href="#grasp-execution-node-cpp">grasp_execution_node.cpp</a></li>
<li class="toctree-l3"><a class="reference internal" href="#additional-configurations">Additional configurations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="grasp_execution_configuration.html">Grasp Execution Configuration Files</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#running-grasp-execution">Running grasp execution</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#publishing-a-fake-task">Publishing a Fake Task</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Tutorials</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/emd_example.html">Step-By-Step Tutorials</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">EMD</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Grasp Execution</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/emd_packages/grasp_execution/grasp_execution_demo.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="grasp-execution">
<span id="id1"></span><h1>Grasp Execution<a class="headerlink" href="#grasp-execution" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>The Easy Manipulation Deployment Grasp Execution package was developed to provide a robust path planning process to navigate robot to the target location for grasping. The package serves as a grasp execution simulator using Moveit2 path planners and the results from the <a class="reference internal" href="../grasp_planner/grasp_planner.html#grasp-planner"><span class="std std-ref">Grasp Planner</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is recommended that you use scene packages generated by the <a class="reference internal" href="../workcell_builder/workcell_builder.html#workcell-builder"><span class="std std-ref">Workcell Builder</span></a>. If you are using a robot, make sure you have the <strong>moveit config folder</strong> (check out <a class="reference internal" href="../workcell_builder/workcell_builder_initial.html#workcell-initialization"><span class="std std-ref">Workcell Initialization</span></a> for more information about the moveit_config folder)</p>
</div>
<div class="section" id="benefits-of-emd-grasp-execution">
<h3>Benefits of EMD Grasp Execution<a class="headerlink" href="#benefits-of-emd-grasp-execution" title="Permalink to this headline">¶</a></h3>
<p><strong>1. Seamless intergration with EMD Grasp Planner</strong></p>
<p>The EMD Grasp Execution package communicates with the Grasp Planner package through the subscription to a single ROS2 topic with the GraspTask.msg type. Details of the GraspTask Message can be found here: <a class="reference internal" href="../grasp_planner/grasp_planner_output.html#grasp-planner-output"><span class="std std-ref">Grasp Planner Output Message Types</span></a></p>
<p><strong>2. Dynamic Safety Capabilities</strong></p>
<p>In real life use cases, collaborative robots often operate closely with human operators or reside in an ever-changing environment. There is thus a need for the robot to be equipped with the dynamic safety capability, to detect possible collision during its trajectory execution and avoid these occurring obstacles.</p>
<p>Grasp Execution provides users with a vision based dynamic collision avoidance capability using Octomaps. When a collision has been deemed to occur in the trajectory of the robot, the dynamic safety module will be triggered. This would either stop the robot to avoid collision, or call for the dynamic replanning of its trajectory given the new collision objects in the scene.</p>
</div>
</div>
<div class="section" id="package-configuration">
<h2>Package configuration<a class="headerlink" href="#package-configuration" title="Permalink to this headline">¶</a></h2>
<p>Before running the grasp execution package, make sure that you have a scene package in the <code class="docutils literal notranslate"><span class="pre">workcell/src/scenes/</span></code> folder.</p>
<div class="section" id="launch-file">
<h3>Launch file<a class="headerlink" href="#launch-file" title="Permalink to this headline">¶</a></h3>
<p>Open the <code class="docutils literal notranslate"><span class="pre">grasp_execution.launch.py</span></code> file in <code class="docutils literal notranslate"><span class="pre">/workcell/src/easy_manipulation_deployment/grasp_execution/example/launch/</span></code> and change the parameters accordingly.</p>
<p><strong>scene_pkg</strong></p>
<p>The name of your scene package</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">scene_pkg</span> <span class="o">=</span> <span class="s1">&#39;ur5_2f_test&#39;</span>
</pre></div>
</div>
<p><strong>base_link</strong></p>
<p>The base link of the robot connected to the table surface</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">robot_base_link</span> <span class="o">=</span> <span class="s1">&#39;base_link&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="grasp-execution-node-cpp">
<h3>grasp_execution_node.cpp<a class="headerlink" href="#grasp-execution-node-cpp" title="Permalink to this headline">¶</a></h3>
<p>Open the <code class="docutils literal notranslate"><span class="pre">demo_node.cpp</span></code> file in <code class="docutils literal notranslate"><span class="pre">/workcell/src/easy_manipulation_deployment/grasp_execution/example/src/</span></code> and change the parameters accordingly.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>static const char PLANNING_GROUP<span class="o">[]</span> <span class="o">=</span> <span class="s2">&quot;manipulator&quot;</span><span class="p">;</span>

static const char EE_LINK<span class="o">[]</span> <span class="o">=</span> <span class="s2">&quot;ee_palm&quot;</span><span class="p">;</span>

static const float <span class="nv">CLEARANCE</span> <span class="o">=</span> <span class="m">0</span>.1<span class="p">;</span>

static const char GRASP_TASK_TOPIC<span class="o">[]</span> <span class="o">=</span> <span class="s2">&quot;grasp_tasks&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>PLANNING_GROUP</strong></p>
<p>Robot group state that is declared in the srdf. for example, in the file <code class="docutils literal notranslate"><span class="pre">ur5_moveit_config/config/ur5.srdf.xacro</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&lt;!--GROUPS: Representation of a <span class="nb">set</span> of joints and links. This can be useful <span class="k">for</span> specifying DOF to plan <span class="k">for</span>, defining arms, end effectors, etc--&gt;
&lt;group <span class="nv">name</span><span class="o">=</span><span class="s2">&quot;manipulator&quot;</span>&gt;
    &lt;chain <span class="nv">base_link</span><span class="o">=</span><span class="s2">&quot;base_link&quot;</span> <span class="nv">tip_link</span><span class="o">=</span><span class="s2">&quot;ee_link&quot;</span> /&gt;
&lt;/group&gt;
</pre></div>
</div>
<p>the planning_group is then <em>manipulator</em></p>
<p><strong>EE_LINK</strong></p>
<p>Tip link of end effector</p>
<p><strong>CLEARANCE</strong></p>
<p>Distance above the object that the end effector would plan to before moving down to pick the object up</p>
<p><strong>GRASP_TASK_TOPIC</strong></p>
<p>ROS2 topic from the Grasp Planning component that will output the GraspTask message</p>
</div>
<div class="section" id="additional-configurations">
<h3>Additional configurations<a class="headerlink" href="#additional-configurations" title="Permalink to this headline">¶</a></h3>
<p>Other configurations that can be customized for grasp execution</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="grasp_execution_configuration.html">Grasp Execution Configuration Files</a><ul>
<li class="toctree-l2"><a class="reference internal" href="grasp_execution_configuration.html#changing-the-start-positions">Changing the start positions</a></li>
<li class="toctree-l2"><a class="reference internal" href="grasp_execution_configuration.html#changing-the-fake-object-published">Changing the fake object published</a></li>
<li class="toctree-l2"><a class="reference internal" href="grasp_execution_configuration.html#changing-the-grasp-execution-parameters">Changing the grasp execution parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="grasp_execution_configuration.html#changing-the-dynamic-safety-execution-parameters">Changing the dynamic safety execution parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="grasp_execution_configuration.html#changing-the-workcell-configurations">Changing the workcell configurations</a></li>
</ul>
</li>
</ul>
</div>
</div>
</div>
<div class="section" id="running-grasp-execution">
<h2>Running grasp execution<a class="headerlink" href="#running-grasp-execution" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 launch grasp_execution grasp_execution.launch.py
</pre></div>
</div>
<p>You should then see RViz launch with the initial workcell scene, where the robot arm is at its home state.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Ensure that on your terminal, the ROS2 distribution is sourced, Moveit2 is sourced, and the workspace is built and sourced as well.</p>
</div>
<div class="section" id="publishing-a-fake-task">
<h3>Publishing a Fake Task<a class="headerlink" href="#publishing-a-fake-task" title="Permalink to this headline">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ros2 launch grasp_execution fake_task_publisher.launch.xml
</pre></div>
</div>
<p>This publishes an object for the robot to conduct a pick-and-place operation. The location and dimensions of the object can be configured in <code class="docutils literal notranslate"><span class="pre">grasp_execution/example/config/fake_grasp_pose_publisher.yaml</span></code> as described in the <a class="reference internal" href="grasp_execution_configuration.html#grasp-execution-configuration"><span class="std std-ref">configuration page</span></a>.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="grasp_execution_configuration.html" class="btn btn-neutral float-right" title="Grasp Execution Configuration Files" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../grasp_planner/grasp_planner_output.html" class="btn btn-neutral float-left" title="Grasp Planner Output Message Types" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Glenn Tan.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>